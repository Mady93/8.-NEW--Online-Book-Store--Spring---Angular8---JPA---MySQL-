<div class="align">
  <h1 class="size">My Orders</h1>
</div>

<div *ngIf="allOrders > 0" class="custom">

  <details *ngFor="let order of orders | paginate: {itemsPerPage: size, currentPage: page, totalItems: allOrders}"
    (click)="openDetail(order.id)"> 
    <summary>
      <!--<b>Order of: {{order.createdAt | date: 'dd/MM/yyyy'}}</b>-->
      <b>Order of: {{order.createdAt | date:  'dd/MM/yyyy HH:mm:ss'}}</b>
    </summary>
   
    <div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead class="thead-dark">
          <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Quantity</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ele of ordersDetails[order.id]?.orders">
            <td>
              <div style="position: relative; display: inline-block;">
                <img src="data:image/jpeg;base64,{{ele.book.picByte}}" />
                <label>{{ele.book.name}}</label>
              </div>
            </td>
            <td>{{ele.book.author}}</td>
            <td>{{ele.quantity}}</td>
            <td>{{ele.book.price | currency:'USD'}}</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td>Total: {{ ordersDetails[order.id]?.total | currency:'USD' }}</td>
          </tr>
        </tbody>
      </table>

    </div>


  </details>
</div>

<div class="custom-margin d-flex justify-content-center" *ngIf="allOrders > 0">
  <pagination-controls (pageChange)="renderPage($event)"></pagination-controls>
</div>

<div class="custom-margin">
  <p *ngIf='msg' [innerHTML]="msg" class="paragraph"></p>
</div>